language: go

env:
  global:
    - GO111MODULE=on

os:
  - linux

go:
  - "1.21.x"
  - "1.22.x"
  - "1.23.x"

git:
  depth: 1

install: skip

notifications:
  email: false

before_script:
  - go install golang.org/x/tools/cmd/cover@latest
  - go install github.com/mattn/goveralls@latest
  - curl -sSfL https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh | sh -s -- -b $(go env GOPATH)/bin v1.64.8

script:
  - golangci-lint run --config .golangci.yml
  - go test -v -covermode=count -coverprofile=coverage.out ./...
  - goveralls -coverprofile=coverage.out -service=travis-ci

jobs:
  fast_fail: true
